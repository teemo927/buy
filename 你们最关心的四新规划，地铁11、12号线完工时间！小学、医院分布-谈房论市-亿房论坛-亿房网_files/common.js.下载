"use strict";var tool={baseUrl:snsurl_uc_url+"/ucaction",ajax:function(a,b,c,d){var e=c.async||!0;delete c.async,$.ajax({type:b||"Get",url:a,data:c,dataType:"json",async:e,success:function(a){d&&d(a)},error:function(a){tool.confirm(a.responseText)}})},base64decode:function(a){var b,c,d,e,f,g,h,i=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1);for(g=a.length,f=0,h="";f<g;){do{b=i[255&a.charCodeAt(f++)]}while(f<g&&-1==b);if(-1==b)break;do{c=i[255&a.charCodeAt(f++)]}while(f<g&&-1==c);if(-1==c)break;h+=String.fromCharCode(b<<2|(48&c)>>4);do{if(61==(d=255&a.charCodeAt(f++)))return h;d=i[d]}while(f<g&&-1==d);if(-1==d)break;h+=String.fromCharCode((15&c)<<4|(60&d)>>2);do{if(61==(e=255&a.charCodeAt(f++)))return h;e=i[e]}while(f<g&&-1==e);if(-1==e)break;h+=String.fromCharCode((3&d)<<6|e)}return h},showMsg:function(a,b,c,d){var e;switch(a){case"error":e="glyphicon-exclamation-sign";break;case"success":e="glyphicon-ok-sign";break;case"info":e="glyphicon-info-sign";break;default:return}var d=d||500,f=dialog({content:'<div class="msg"><span class="glyphicon '+e+'"></span><span class="cont">'+b+"</span></div>"}).show();setTimeout(function(){f.close().remove(),c&&c()},d)},confirm:function(a,b){var c=dialog({backdropOpacity:.5,title:"确认提示",content:a,button:[{value:"确定",callback:b,autofocus:!0},{value:"取消",callback:function(){c.close().remove()}}]});a&&c.showModal()},getDate:function(a){return"number"!=typeof a&&(a=1e3*parseInt(a)),a?new Date(a).Format("yyyy-MM-dd hh:mm"):"0000-00-00 00:00"},generateOptionsHtml:function(a,b,c,d,e){var f="",a=a||[];void 0!=d&&(f+='<option value="'+d.value+'">'+d.text+"</option>");for(var g=0;g<a.length;g++){var h=b?a[g][b]:a[g],i=c?a[g][c]:a[g];f+=e==i?'<option value="'+i+'" title="123" selected="selected">'+h+"</option>":'<option value="'+i+'" title="123">'+h+"</option>"}return f},getParams:{arr:function(a){for(var b=a.split(",")||[],c=[],d=0;d<b.length;d++)c.push(tool.getParams.obj(b[d]));return c},obj:function(a){for(var b={},c=a.split("&")||[],d=0;d<c.length;d++){var e=c[d].split("=")||[];e.length>=2&&(b[e[0]]=decodeURIComponent(e[1]))}return b}},getFullDate:function(a){return"number"!=typeof a&&(a=1e3*parseInt(a)),a?new Date(a).Format("yyyy-MM-dd hh:mm:ss"):"0000-00-00 00:00:00"},getSuccessMethod:function(a){var b=a.substring(a.indexOf(".")+1);return b=b.replace(/\./g,"_"),b+="_response"},ajax1:function(a,b,c,d){c=$.extend(c,{method:a,timestamp:tool.getFullDate((new Date).getTime())}),c.v=c.v||1e3;var e=tool.getSuccessMethod(a);if(c.requrl){var f=c.requrl;delete c.requrl}$.ajax({type:b||"Get",url:f||snsurl_uc_url+"/router/rest",data:c,dataType:"json",success:function(a){d&&d(a,e)},error:function(a){tool.confirm(a.responseText)}})},ajaxJsonp:function(a,b,c,d){c=$.extend(c,{method:a,v:"1.0.0",timestamp:tool.getFullDate((new Date).getTime())});var e=tool.getSuccessMethod(a);if(c.requrl){var f=c.requrl,g=c.jsonpcallback;delete c.requrl,delete c.jsonpcallback}$.ajax({async:!1,type:b,url:f||tool.homeUrl,data:c,dataType:"jsonp",jsonp:g||"yfcallback",success:function(a){d&&d(a,e)},error:function(a){console.log(a.responseText)}})},bulidBanner:function(a){for(var b='<li class="arrow"><a href="#">武汉</a></li>',c=0;c<a.length;c++)b+='<li><a href="'+a[c].catagoryUrl+'" target="_blank">'+a[c].catagoryName+"</a></li>";$(".header-nav").html(b)},showError:function(a){tool.confirm("错误码："+a.error_response.code+"<br/>"+a.error_response.msg+a.error_response.sub_code)}},cookie={Get:function(a){var b=new RegExp(a+"=([^;]*);?","gi"),c=b.exec(document.cookie)||[];return c.length>1?c[1]:null},Get1:function(a){var b=new RegExp(a+"=([^;]*);?","gi"),c=b.exec(document.cookie)||[];return unescape(c.length>1?c[1]:null)},Set:function(a,b,c,d,e,f){var g=new Date;e=e||".fdc.com.cn",c&&g.setTime(g.getTime()+36e5*c),document.cookie=a+"="+b+"; "+(c?"; expires="+g.toUTCString():"")+(d?"; path="+d:"")+(e?"; domain="+e:"")+(f?"; secure":"")},Set1:function(a,b,c,d,e,f){var g=new Date;d=d||"/",e=e||".fdc.com.cn",c&&g.setTime(g.getTime()+864e5*c),document.cookie=a+"="+escape(b)+"; "+(c?"; expires="+g.toUTCString():"")+(d?"; path="+d:"")+(f?"; secure":""),document.cookie=a+"="+escape(b)+"; "+(c?"; expires="+g.toUTCString():"")+(d?"; path="+d:"")+(e?"; domain="+e:"")+(f?"; secure":"")},Del:function(a,b,c){var d=cookie.Get(a);return b=b||"/",c=c||".fdc.com.cn",document.cookie=a+"="+(b?"; path="+b:"")+(c?"; domain="+c:"")+"; expires=Thu, 01-Jan-70 00:00:01 GMT",d}},createPage;!function(a){var b=a(window).height()-a(".top").height()-a(".copyright").height()-4;a(".login-content, .user-register-container, .tel-bind-container, .get-password-container, .content").css("min-height",b+"px"),a("body").on("focus","input[text],textarea",function(){a(this).addClass("outline")}),a("body").on("blur","input[text],textarea",function(){a(this).removeClass("outline")}),a("body").on("focus","input.outlinenull,textarea.outlinenull",function(){a(this).removeClass("outline")});var c=location.hash,d=c.substring(1,2);"1"==d?a(".home-container .home-banner-noroles").animate({height:"220px"},1e3):"2"==d?(a(".home-container-other .home-banner-noroles").height("220"),a(".home-container-other .home-banner-noroles").animate({height:"0"},1e3)):a(".container").removeClass("home-container-other"),Date.prototype.Format=function(a){var b={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var c in b)new RegExp("("+c+")").test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?b[c]:("00"+b[c]).substr((""+b[c]).length)));return a},createPage=function(a){var b=a.attr("data-cur"),c=a.attr("data-count");if(parseInt(c)<2)return a.html(""),void a.parent().css("padding","0");var d=a.attr("data-disable"),e='<li data-page="prev"><</li>';if(void 0==b||void 0==c||"true"==d)return!1;if(parseInt(c)>10)if(parseInt(b)-5>0){if(parseInt(b)-5>=2&&parseInt(b)<parseInt(c)-3){e+="<li data-page=1>1</li><li>···</li>";for(var f=parseInt(b)-3;f<=parseInt(b)+2;f++)e+='<li class="'+(f==b?"cur":"")+'" data-page='+f+">"+f+"</li>";e+="<li>···</li><li data-page="+c+">"+c+"</li>"}else if(parseInt(b)-5<2){for(var f=1;f<=8;f++)e+='<li class="'+(f==b?"cur":"")+'" data-page='+f+">"+f+"</li>";e+="<li>···</li><li data-page="+c+">"+c+"</li>"}else if(parseInt(b)>=parseInt(c)-3){e+="<li data-page=1>1</li><li>···</li>";for(var f=parseInt(c)-7;f<=c;f++)e+='<li class="'+(f==b?"cur":"")+'" data-page='+f+">"+f+"</li>"}}else{for(var f=1;f<=8;f++)e+='<li class="'+(f==b?"cur":"")+'" data-page='+f+">"+f+"</li>";e+="<li>···</li><li data-page="+c+">"+c+"</li>"}else for(var f=1;f<=c;f++)e+='<li class="'+(f==b?"cur":"")+'" data-page='+f+">"+f+"</li>";e+='<li data-page="next">></li>',a.html(e)},a(".page").each(function(b,c){createPage(a(this))}),a(".page").delegate("li","click",function(b){var c=a(this).attr("data-page"),d=a(this).parent(".page").attr("data-cur"),e=a(this).parent(".page").attr("data-count");switch(c){case void 0:return!1;case"prev":if(1==parseInt(d))return!1;c=parseInt(d)-1;break;case"next":if(parseInt(d)==e)return!1;c=parseInt(d)+1}a(this).parent(".page").attr("data-cur",c),createPage(a(this).parent(".page"))}),a.fn.extend({updataPage:function(){createPage(a(this))}}),a("#qq, #wechat, #weibo").click(function(b){var c="ucaction.login.third."+a(this).attr("id")+".pass",d=decodeURIComponent(cookie.Get("userInfo")),e=decodeURIComponent(cookie.Get("curUrl")),f={userid:"null"!=d?d:void 0,curUrl:"null"!=e?e:"home.html",invaliddata:(new Date).getTime()};tool.ajax1(c,"Get",f,function(a,b){a[b]?(console.log("第三方登录成功……"),window.location.href=a[b].data.url):tool.showError(a)})}),a("#login-out").click(function(a){cookie.Del("userInfo"),cookie.Del("token"),console.log(decodeURIComponent(cookie.Get("curUrl"))),window.location.reload()})}(jQuery);